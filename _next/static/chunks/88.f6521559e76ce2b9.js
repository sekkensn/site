"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[88],{9088:function(t,e,l){l.r(e);var r=l(7437),a=l(2265),n=l(7020),i=l.n(n);e.default=t=>{let{animationState:e,onAnimationEnd:l}=t,n=(0,a.useRef)(null),s=(0,a.useRef)(null),o=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{{let t,r,a,u,f,h=[],c={},d=[],p=0,m=0,x=0,g=0;return s.current=new(i())(i=>{i.preload=()=>{try{i.loadStrings("/files/default_cities.txt",s),i.loadStrings("/files/cities_distances.txt",w),f=i.loadFont("/fonts/Nacelle-SemiBold.otf")}catch(t){console.error("Error loading resources:",t)}},i.setup=()=>{i.createCanvas(n.current.offsetWidth,n.current.offsetHeight).parent(n.current),i.frameRate(60),f&&i.textFont(f)},i.windowResized=()=>{i.resizeCanvas(n.current.offsetWidth,n.current.offsetHeight)},i.draw=()=>{i.clear(),v(i),"running"!==e||o.current||k(i),b(i),y(i)};let s=e=>{for(let t of e){let[e,l,r]=t.split(",").map(t=>t.trim());c[e]={lat:parseFloat(l),lon:parseFloat(r)}}t=Math.min(...Object.values(c).map(t=>t.lat)),r=Math.max(...Object.values(c).map(t=>t.lat)),a=Math.min(...Object.values(c).map(t=>t.lon)),u=Math.max(...Object.values(c).map(t=>t.lon))},w=t=>{h=t.map(t=>t.split(",").map(t=>t.trim()))},v=e=>{for(let l in c){let{lat:n,lon:i}=c[l],s=e.map(i,a,u,e.width/6,5*e.width/6),o=e.map(n,r,t,e.height/6,5*e.height/6);e.fill(0),e.ellipse(s,o,4,4)}},k=t=>{p<h.length?g<30?g++:(E(t),g=0):l()},E=t=>{if(p<h.length){let[e,l]=h[p];m=F(t,e,l),x+=m,p++}},F=(e,l,n)=>{let i=c[l],s=c[n];if(!i||!s)return console.error(`Coordinates not found for: from = ${l}, to = ${n}`),0;let o=e.map(i.lon,a,u,e.width/6,5*e.width/6),f=e.map(i.lat,r,t,e.height/6,5*e.height/6),h=e.map(s.lon,a,u,e.width/6,5*e.width/6),p=e.map(s.lat,r,t,e.height/6,5*e.height/6);return d.push({x1:o,y1:f,x2:h,y2:p}),C(e,i.lat,i.lon,s.lat,s.lon)},b=t=>{t.stroke(255,0,0);for(let e=0;e<d.length;e++){let l=d[e];if(e===d.length-1&&g<30){let e=g/30,r=t.lerp(l.x1,l.x2,e),a=t.lerp(l.y1,l.y2,e);t.line(l.x1,l.y1,r,a)}else t.line(l.x1,l.y1,l.x2,l.y2)}},y=t=>{t.textAlign(t.CENTER),t.textSize(25),t.fill(255),f&&t.textFont(f),t.text(`Distance: ${m.toFixed(2)} km`,t.width/2,50),t.text(`Total Distance: ${x.toFixed(2)} km`,t.width/2,80)},C=(t,e,l,r,a)=>{let n=t.radians(r-e),i=t.radians(l-a),s=t.sin(n/2)*t.sin(n/2)+t.cos(t.radians(e))*t.cos(t.radians(r))*t.sin(i/2)*t.sin(i/2);return 2*t.atan2(t.sqrt(s),t.sqrt(1-s))*6371}},n.current),()=>{s.current&&s.current.remove()}}},[]),(0,a.useEffect)(()=>{o.current="paused"===e},[e]),(0,r.jsx)("div",{ref:n,className:"w-full h-full"})}}}]);